<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
</body>
<!-- <script>
    let fade = document.getElementById('fade-obj')
    let btn = document.getElementById('fade-btn')
    fade.style.opacity = 1
    let fun1 = function(){
        let deep = setInterval(function(){
        if(fade.style.opacity > 0){
            fade.style.opacity -= 0.2
            btn.disabled = true
        }else if(fade.style.opacity == 0){
            btn.textContent = '淡入'
            clearInterval(deep)
            btn.disabled = false
        }
    },100)
    }
    let fun2 = function(){
        let shadow = setInterval(function(){
        if(fade.style.opacity < 1){
            fade.style.opacity = 0.2+parseFloat(fade.style.opacity)
            btn.disabled = true
            // console.log(typeof(fade.style.opacity))
            // let status = fade.style.opacity
            // status += 0.2
            // console.log('status:'+status)
            // fade.style.opacity = status
            // console.log(fade.style.opacity)
            // console.log(fade.style.opacity<1)
            // console.log('...')
            // 这一段的注释是错误代码，可以看到opacity并没有被成功赋值，因为他是string类型，加号运算转换为拼接符
        }else if(fade.style.opacity == 1){
            btn.textContent = '淡出'
            clearInterval(shadow)
            btn.disabled = false
        }
    },100)
    }
    btn.onclick = function(){
        if(fade.style.opacity == 1){
            fun1()
        }else if(fade.style.opacity == 0){
            fun2()
        }
    }
</script> //setInterval的实现方法-->
<script>
    let fade = document.getElementById('fade-obj')
    let btn = document.getElementById('fade-btn')
    fade.style.opacity = 1
    let fun1 = function(){
        setTimeout(function(){
            if(fade.style.opacity > 0){
                fade.style.opacity -= 0.2
                btn.disabled = true
                fun1()
            }else if(fade.style.opacity == 0){
                btn.disabled = false
                btn.textContent = '淡入'
            }
        },100)
    }
    let fun2 = function(){
        setTimeout(function(){
            if(fade.style.opacity < 1){
                fade.style.opacity = +fade.style.opacity+0.2
                btn.disabled = true
                fun2()
            }else if(fade.style.opacity == 1){
                btn.disabled = false
                btn.textContent = '淡入'
            }
        },100)
    }
    btn.onclick = function(){
        if(fade.style.opacity == 1){
            fun1()
        }
        if(fade.style.opacity == 0){
            fun2()
        }
    }
</script>
</html>